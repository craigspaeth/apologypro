<doctype html>
<head>
  <title>ApologyPro: Because You're An Amateur</title>
  <link rel="stylesheet" href="apologypro.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="marked.js"></script>
</head>
<body>

  <header>
    <section class="container">
      <section id="title">
        <h1>ApologyPro</h1>
        <h2>Because You're An Amateur</h2>
      </section>
      <section id="about">
        <a href="https://twitter.com/#!/avdi">Avdi Grimm</a> 
        has been kind enough to 
        show those who have dug their own grave
        <a href="https://gist.github.com/2160569">how to apologize correctly</a>.
        Just copy this form letter and follow the instructions!
        It's as easy as that.
      </section>
    </section>
  </header>

  <section id="main">
    <section class="container">
      <article id="apology-markdown"></article>
    </section>
  </section>

  <footer>
    <section class="container">
      ApologyPro renders the form letter directly from the
      <a href="https://gist.github.com/2160569">Github Gist</a>
      that Avdi provided, and uses the
      <a href="https://github.com/chjj/marked">marked</a>
      Markdown renderer to render it in your browser.
    </section>
  </footer>

  <article id="apology">
    <script src="https://gist.github.com/2160569.js?file=apology101.markdown"></script>
  </article>

  <script>
    $(function(){
      var apology = $("#apology-markdown");

      var markdown = "";
      $("#apology .gist-data pre").children().each(function(){
        var text = $(this).text();
        markdown = markdown + "\n" + text;
      });

      marked.setOptions({
        gfm: true,
        pedantic: false,
        sanitize: true
      });

      var html = marked(markdown);
      apology.html(html);
    });
  </script>

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20471045-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
  </body>
